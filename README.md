# Docker PHP Bootstrap

This tool is a builder of development environment including PHP-FPM, MySQL and Nginx.
I'ts just a bunch of configurations, so you can freely change them for you needs.
It's also pre configured, so you need only place your files in sources directory and run container.
Entry point to work with container is `run.sh` which wraps `docker-compose` and
pass some configuration together, allowing single place of configuration in `.env` file.

## Create project

To create new project just clone this repository anywhere, and place you code to `./src` directory.
Then you may change some variables, if need in `.env` file and run container through `run.sh`.

## Configuration

All configs may be tuned through environment variables, placed in `.env` file,
but you can add configuration in any way in any place. All parameters documented there.

## Managing container

Container management done through `run.sh`.

```
$ ./run.sh
Available commands:
bash [service_name]: launch bash in some service container as root
php: launch php bash as www-user in container
mysql: launch mysql in container
Any commands not in list above goes directly to docker-compose, so be free to use this tool as docker-compose
```

This tool is just `docker-compose` with passed service configurations. So any commands of `docker-compose` may be passed to `run.sh`. 

For example to build containers, run:
```
$ run.sh up -d
```

To stop containers, run:
```
$ run.sh stop
```

Also available additional commands.

To open php shell with www-data user in container, run:
```
$ run.sh php
```

To open mysql console in container, run:
```
$ run.sh mysql
```

To open bash in any container, run:
```
$ run.sh bash nginx
```

## SSL

Cervificates placed in `./compose/nginx/ssl/` and may be regenerated by `./compose/nginx/ssl/gen_crt_quick.sh`.

## Available services

* elasticsearch
* memcached
* mysql
* nginx
* php
* postgres
* rabbitmq
* redis
* mongodb

## Debugging with XDebug

PHP container pre configured to debug web sessions and console applications.
PHP will send debug to host mashine on port remote port `9001`.

To debug console app, use `xphp` tool:
```
$ xphp some.php
```

## Integration

### Sentry

Add Sentry logging intergation with [DockerSentry](https://github.com/sokil/DockerSentry)
